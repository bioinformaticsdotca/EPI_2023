"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_ref-selector_RefSelector_tsx"],{72841:(e,t,a)=>{a.d(t,{A:()=>r});let r=(e,t)=>{let a=new URL(e,window.location.origin),r=new URL(t,window.location.origin);return r.href.includes("#")&&a.host===r.host&&a.pathname===r.pathname&&a.search===r.search}},99707:(e,t,a)=>{a.d(t,{_:()=>o,d:()=>SearchIndex});var r=a(50467),n=a(85351),i=a(7479);let{getItem:s,setItem:l,removeItem:c}=(0,n.A)("localStorage",{throwQuotaErrorsOnSet:!0}),o={Branch:"branch",Tag:"tag"};let SearchIndex=class SearchIndex{render(){this.selector.render()}async fetchData(){try{if(!this.isLoading||this.fetchInProgress)return;if(!this.bootstrapFromLocalStorage()){this.fetchInProgress=!0,this.fetchFailed=!1;let e=await fetch(`${this.refEndpoint}?type=${this.refType}`,{headers:{Accept:"application/json"}});await this.processResponse(e)}this.isLoading=!1,this.fetchInProgress=!1,this.render()}catch{this.fetchInProgress=!1,this.fetchFailed=!0}}async processResponse(e){if(this.emitStats(e),!e.ok){this.fetchFailed=!0;return}let t=e.clone(),a=await e.json();this.knownItems=a.refs,this.cacheKey=a.cacheKey,this.flushToLocalStorage(await t.text())}emitStats(e){if(!e.ok)return void(0,i.i)({incrementKey:"REF_SELECTOR_BOOT_FAILED"},!0);switch(e.status){case 200:(0,i.i)({incrementKey:"REF_SELECTOR_BOOTED_FROM_UNCACHED_HTTP"});break;case 304:(0,i.i)({incrementKey:"REF_SELECTOR_BOOTED_FROM_HTTP_CACHE"});break;default:(0,i.i)({incrementKey:"REF_SELECTOR_UNEXPECTED_RESPONSE"})}}search(e){let t;if(this.searchTerm=e,""===e){this.currentSearchResult=this.knownItems;return}let a=[],r=[];for(let n of(this.exactMatchFound=!1,this.knownItems))if(!((t=n.indexOf(e))<0)){if(0===t){e===n?(r.unshift(n),this.exactMatchFound=!0):r.push(n);continue}a.push(n)}this.currentSearchResult=[...r,...a]}bootstrapFromLocalStorage(){let e=s(this.localStorageKey);if(!e)return!1;let t=JSON.parse(e);return t.cacheKey===this.cacheKey&&"refs"in t?(this.knownItems=t.refs,this.isLoading=!1,(0,i.i)({incrementKey:"REF_SELECTOR_BOOTED_FROM_LOCALSTORAGE"}),!0):(c(this.localStorageKey),!1)}async flushToLocalStorage(e){try{l(this.localStorageKey,e)}catch(t){if(t.message.toLowerCase().includes("quota")){this.clearSiblingLocalStorage(),(0,i.i)({incrementKey:"REF_SELECTOR_LOCALSTORAGE_OVERFLOWED"});try{l(this.localStorageKey,e)}catch(e){e.message.toLowerCase().includes("quota")&&(0,i.i)({incrementKey:"REF_SELECTOR_LOCALSTORAGE_GAVE_UP"})}}else throw t}}clearSiblingLocalStorage(){for(let e of Object.keys(localStorage))e.startsWith(SearchIndex.LocalStoragePrefix)&&c(e)}clearLocalStorage(){c(this.localStorageKey)}get localStorageKey(){return`${SearchIndex.LocalStoragePrefix}:${this.nameWithOwner}:${this.refType}`}constructor(e,t,a,n,i){(0,r._)(this,"refType",void 0),(0,r._)(this,"selector",void 0),(0,r._)(this,"knownItems",[]),(0,r._)(this,"currentSearchResult",[]),(0,r._)(this,"exactMatchFound",!1),(0,r._)(this,"searchTerm",""),(0,r._)(this,"refEndpoint",void 0),(0,r._)(this,"cacheKey",void 0),(0,r._)(this,"nameWithOwner",void 0),(0,r._)(this,"isLoading",!0),(0,r._)(this,"fetchInProgress",!1),(0,r._)(this,"fetchFailed",!1),this.refType=e,this.selector=t,this.refEndpoint=a,this.cacheKey=n,this.nameWithOwner=i}};(0,r._)(SearchIndex,"LocalStoragePrefix","ref-selector")},26807:(e,t,a)=>{a.d(t,{Z:()=>o,o:()=>h});var r=a(96540),n=a(85788),i=a(72841),s=a(97396),l=a(32494),c=a(23818);let o=()=>{let{routes:e}=r.useContext(c.k),t=(0,n.Zp)();return r.useCallback((c,o={})=>{let h=(0,n.o1)(c).pathname;if(!(0,n.ue)(e,h)||o.reloadDocument){let e="string"==typeof c?c:(0,n.AO)(c);(async()=>{let{softNavigate:t}=await Promise.all([a.e("vendors-node_modules_github_turbo_dist_turbo_es2017-esm_js"),a.e("ui_packages_soft-navigate_soft-navigate_ts")]).then(a.bind(a,59519));t(e)})()}else{(0,i.A)(location.href,c.toString())||(0,s.SC)("react");let{preventAutofocus:e,...a}=o;(0,r.startTransition)(()=>{t(c,e?{...a,state:{[l.V]:!0,...a.state}}:a)})}},[t,e])},h=()=>{let[e]=(0,n.ok)(),t=o(),{pathname:a}=(0,n.zy)(),i=r.useCallback((r,i={})=>{t({pathname:a,search:(0,n.PI)("function"==typeof r?r(e):r).toString()},i)},[e,t,a]);return[e,i]}},60039:(e,t,a)=>{a.d(t,{DI:()=>i,QJ:()=>l,Sr:()=>c,lS:()=>s});var r=a(26559),n=a(62053);async function i(e,t={}){var a=e;if(new URL(a,window.location.origin).origin!==window.location.origin)throw Error("Can not make cross-origin requests from verifiedFetch");let s=function(e){let t=new URL(e,window.location.href),a=new URL(window.location.href,window.location.origin),r=a.searchParams.get("_features");r&&!t.searchParams.has("_features")&&t.searchParams.set("_features",r);let n=a.searchParams.get("_tracing");return n&&!t.searchParams.has("_tracing")&&t.searchParams.set("_tracing",n),e.startsWith(window.location.origin)?t.href:`${t.pathname}${t.search}`}(e),l={...t.headers,"GitHub-Verified-Fetch":"true",...(0,r.kt)()},c=await fetch(s,{...t,headers:l}),o=c?.headers?.get("X-Github-Request-Id");return o&&(0,n.Ex)(o),c}function s(e,t){let a={...t?.headers??{},Accept:"application/json","Content-Type":"application/json"},r=t?.body?JSON.stringify(t.body):void 0;return i(e,{...t,body:r,headers:a})}function l(e,t={}){let a={...t.headers,"GitHub-Is-React":"true"};return i(e,{...t,headers:a})}function c(e,t){let a={...t?.headers??{},"GitHub-Is-React":"true"};return s(e,{...t,headers:a})}},79637:(e,t,a)=>{a.d(t,{F:()=>c});var r,n=a(74848),i=a(15385),s=a(96540),l=a(20627);function c({items:e,itemHeight:t,style:a,renderItem:r,makeKey:i,ariaControls:c,shouldUseActionList:d=!1,className:u,containerRole:f="none"}){let m=(0,s.useRef)(null),g=(0,l.Te)({count:e.length,getScrollElement:(0,s.useCallback)(()=>m.current,[]),estimateSize:(0,s.useCallback)(()=>t,[t])});return(0,n.jsx)(o,{ref:m,style:a,virtualizer:g,id:c,shouldUseActionList:d,className:u,children:g.getVirtualItems().map((t,a)=>(0,n.jsx)(h,{containerRole:f,virtualRow:t,children:r(e[t.index],a)},i(e[t.index])))})}let o=s.forwardRef(function({children:e,style:t,virtualizer:a,id:r,shouldUseActionList:s,className:l},c){return(0,n.jsx)("div",{ref:c,style:t,id:r,className:l,children:s?(0,n.jsx)(i.l,{id:r,role:"menu",style:{height:a.getTotalSize(),width:"100%",position:"relative"},selectionVariant:"single",children:e}):(0,n.jsx)("ul",{role:"menu",style:{height:a.getTotalSize(),width:"100%",position:"relative"},id:r,children:e})})});function h({children:e,containerRole:t="none",virtualRow:a}){return(0,n.jsx)("li",{role:t,style:{position:"absolute",top:0,left:0,width:"100%",height:`${a.size}px`,transform:`translateY(${a.start}px)`},children:e})}try{c.displayName||(c.displayName="FixedSizeVirtualList")}catch{}try{(r=VirtualListContainerInner).displayName||(r.displayName="VirtualListContainerInner")}catch{}try{h.displayName||(h.displayName="ItemContainer")}catch{}},86260:(e,t,a)=>{a.d(t,{z:()=>i});var r=a(74848);let n={HighlightedText:"HighlightedText-module__HighlightedText--f97l8"};function i({text:e,search:t,hideOverflow:a=!1,overflowWidth:i=0}){let s=(function(e,t){if(!t)return[e];let a=e.toLowerCase().split(t.toLowerCase());if(a.length<2)return[e];let r=0,n=[];for(let i of a)n.push(e.substring(r,r+i.length)),r+=i.length,n.push(e.substring(r,r+t.length)),r+=t.length;return n})(e,t).map((e,t)=>t%2==1?(0,r.jsx)("strong",{className:"color-fg-default",children:e},t):e),l=i?`${i}px`:void 0;return(0,r.jsx)("div",{style:{maxWidth:l,overflow:a?"hidden":"visible",color:t.length?"fg.muted":"fg.default"},className:n.HighlightedText,children:s})}try{i.displayName||(i.displayName="HighlightedText")}catch{}},50609:(e,t,a)=>{a.d(t,{aH:()=>el,PI:()=>ei,Qe:()=>es,JJ:()=>en});var r=a(74848),n=a(55847),i=a(6869),s=a(64866),l=a(96235),c=a(38621),o=a(84217),h=a(87330),d=a(15385),u=a(9591),f=a(63867),m=a(53110),g=a(96540),y=a(96679),x=a(80663),p=a(95776),S=a(40961);let R={DialogFooterButtons:"CheckTagNameDialog-module__DialogFooterButtons--sw5yG"};function b({isOpen:e,onDismiss:t,onConfirm:a}){let[i]=(0,x.I)(()=>document.body,null,[y.XC?.body]);return i?(0,S.createPortal)((0,r.jsxs)(p.A,{isOpen:e,onDismiss:t,children:[(0,r.jsx)(p.A.Header,{children:"Create branch"}),(0,r.jsxs)("div",{className:"p-3",children:[(0,r.jsx)("span",{children:"A tag already exists with the provided branch name. Many Git commands accept both tag and branch names, so creating this branch may cause unexpected behavior. Are you sure you want to create this branch?"}),(0,r.jsxs)("div",{className:R.DialogFooterButtons,children:[(0,r.jsx)(n.Q,{onClick:t,children:"Cancel"}),(0,r.jsx)(n.Q,{variant:"danger",onClick:a,className:"ml-2",children:"Create"})]})]})]}),document.body):null}try{b.displayName||(b.displayName="CheckTagNameDialog")}catch{}var _=a(60039);async function C(e,t){let a=new FormData;a.set("value",t);let r=await (0,_.DI)(e,{method:"POST",body:a,headers:{Accept:"application/json"}});return!!r.ok&&!!await r.text()}async function T(e,t,a){let r=new FormData;r.set("name",t),r.set("branch",a);let n=await (0,_.DI)(e,{method:"POST",body:r,headers:{Accept:"application/json"}});if(n.ok)return{success:!0,name:(await n.json()).name};try{let{error:e}=await n.json();if(e)return{success:!1,error:e};throw Error("Unknown response from create branch API")}catch{return{success:!1,error:"Something went wrong."}}}var w=a(3971),j=a(69676);let v={RefSelectorOverlayBtn:"RefSelectorAnchoredOverlay-module__RefSelectorOverlayBtn--VlL0G",RefSelectorOverlayContainer:"RefSelectorAnchoredOverlay-module__RefSelectorOverlayContainer--zopKZ",RefSelectorOverlayHeader:"RefSelectorAnchoredOverlay-module__RefSelectorOverlayHeader--j083h",RefSelectorBtnTextContainer:"RefSelectorAnchoredOverlay-module__RefSelectorBtnTextContainer--k6jL0",RefSelectorText:"RefSelectorAnchoredOverlay-module__RefSelectorText--A0p63",RefSelectorBtnPrefixText:"RefSelectorAnchoredOverlay-module__RefSelectorBtnPrefixText--dq2On"};var N=a(34164);function L(e){let{ariaDescribedBy:t,ariaLabelledBy:a,ariaLabel:i,hotKey:s,onOpenChange:l,size:o,displayCommitish:h,refType:d,children:u,preventClosing:f,inputRef:m,overlayOpen:y,onOverlayChange:x,focusTrapEnabled:p=!0,buttonClassName:S,buttonText:R,persistButtonText:b=!0,buttonPrefix:_,showIcon:C=!0,allowResizing:T,useFocusZone:L}=e,O=e.idEnding?`-${e.idEnding}`:`-${Date.now()}`,A=(0,g.useRef)(`ref-picker${O}`),I=(0,g.useCallback)(e=>{x(e),l?.(e)},[l,x]),k=(0,g.useMemo)(()=>p?{initialFocusRef:m}:{initialFocusRef:m,disabled:!0},[p,m]);return(0,r.jsx)(w.T,{open:y,overlayProps:{role:"dialog",width:"medium","aria-label":"branch"===d?"Select a branch":"Select a tag"},onOpen:()=>I(!0),onClose:()=>!f&&I(!1),renderAnchor:e=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.Q,{...e,"data-hotkey":s,size:o,style:{minWidth:T?0:void 0},trailingVisual:c.TriangleDownIcon,"aria-describedby":t,"aria-labelledby":a,"aria-label":a?void 0:i??`${h} ${d}`,"data-testid":"anchor-button",id:A.current,className:(0,N.$)(S,v.RefSelectorOverlayBtn),children:(0,r.jsxs)("div",{className:v.RefSelectorOverlayContainer,children:[C&&(0,r.jsx)("div",{className:v.RefSelectorOverlayHeader,children:"tag"===d?(0,r.jsx)(c.TagIcon,{size:"small"}):(0,r.jsx)(c.GitBranchIcon,{size:"small"})}),(0,r.jsx)("div",{style:{maxWidth:T?void 0:125},className:(0,N.$)("ref-selector-button-text-container",v.RefSelectorBtnTextContainer),children:(0,r.jsxs)("span",{className:v.RefSelectorText,children:["\xa0",(()=>{let e=h.length>0,t=R&&b?R:e?h:R||"";return _?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{className:v.RefSelectorBtnPrefixText,children:[_,":"]}),(0,r.jsxs)("span",{children:[" ",t]})]}):t})()]})})]})}),(0,r.jsx)("button",{hidden:!0,"data-hotkey":s,onClick:()=>I(!0),"data-hotkey-scope":"read-only-cursor-text-area"})]}),focusTrapSettings:k,focusZoneSettings:L?{bindKeys:j.z0.ArrowAll|j.z0.Tab}:{disabled:!0},children:(0,r.jsx)("div",{"data-testid":"overlay-content","aria-labelledby":A.current,id:"selectPanel",children:u})})}try{L.displayName||(L.displayName="RefSelectorAnchoredOverlay")}catch{}var O=a(75177);function A({text:e,onClick:t,href:a,sx:n}){let i=!!a,s=(0,r.jsx)(O.A,{sx:{...n},children:e}),l={sx:{minWidth:0}};return i?(0,r.jsx)(d.l.LinkItem,{role:"link",href:a,onClick:()=>t?.(),...l,children:s}):(0,r.jsx)(d.l.Item,{role:"button",onSelect:()=>t?.(),...l,children:s})}try{A.displayName||(A.displayName="RefSelectorFooter")}catch{}var I=a(79637),k=a(47139),F=a(86260),E=a(26807);let D={ItemIcon:"RefItem-module__ItemIcon--Ss18O"},V=g.memo(function({isCurrent:e,isDefault:t,href:a,gitRef:n,filterText:i,ariaPosInSet:s,ariaSetSize:l,onSelect:c,onClick:o,shouldSetAsDiv:h=!1}){let u=(0,r.jsx)(B,{gitRef:n,isDefault:t,isCurrent:e,filterText:i}),f={"aria-posinset":h?void 0:s,"aria-setsize":h?void 0:l,sx:{minWidth:0},onSelect:()=>{c?.(n),a&&m(a,{reloadDocument:!0})},onClick:()=>{o?.(n),a&&m(a,{reloadDocument:!0})}},m=(0,E.Z)();return h?(0,r.jsx)(d.l.Item,{role:"menuitemradio",as:"div",...f,children:u}):(0,r.jsx)(d.l.Item,{role:"menuitemradio",...f,children:u})}),B=g.memo(function({isCurrent:e,isDefault:t,gitRef:a,filterText:n,showLeadingVisual:i=!0}){return(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,r.jsxs)("div",{style:{display:"flex",minWidth:0,alignItems:"flex-end"},children:[i&&(0,r.jsx)(m.A,{icon:c.CheckIcon,"aria-hidden":!0,"data-icon-visibility":e?"visible":"hidden",className:D.ItemIcon}),(0,r.jsx)(F.z,{hideOverflow:!0,search:n,text:a},a)]}),t&&(0,r.jsx)(k.A,{children:"default"})]})});try{V.displayName||(V.displayName="RefItem")}catch{}try{B.displayName||(B.displayName="RefItemContent")}catch{}let P={FixedSizeVirtualList:"RefsList-module__FixedSizeVirtualList--P_Ami"};function H(e){return e.refs.length>20?(0,r.jsx)(z,{...e}):(0,r.jsx)($,{...e})}function $({refs:e,defaultBranch:t,currentCommitish:a,getHref:n,filterText:i,onSelectItem:s,ariaControls:l}){return(0,r.jsx)("ul",{style:{maxHeight:330,overflowY:"auto"},id:l,children:e.map(l=>(0,r.jsx)(V,{href:n?.(l),isCurrent:a===l,isDefault:t===l,filterText:i,gitRef:l,onSelect:s,onClick:s,ariaPosInSet:e.indexOf(l)+1,ariaSetSize:e.length},l))})}function z({refs:e,defaultBranch:t,currentCommitish:a,getHref:n,filterText:i,onSelectItem:s,ariaControls:l}){return(0,r.jsx)(I.F,{ariaControls:l,items:e,itemHeight:32,style:{maxHeight:330},containerRole:"group",makeKey:e=>e,renderItem:l=>(0,r.jsx)(V,{shouldSetAsDiv:!0,href:n?.(l),isCurrent:a===l,isDefault:t===l,filterText:i,gitRef:l,onSelect:s,onClick:s,ariaPosInSet:e.indexOf(l)+1,ariaSetSize:e.length},l),className:P.FixedSizeVirtualList})}try{H.displayName||(H.displayName="RefsList")}catch{}try{$.displayName||($.displayName="FullRefsList")}catch{}try{z.displayName||(z.displayName="VirtualRefsList")}catch{}var K=a(99707);function W(e,t,a,r,n){return new K.d("branch"===r?K._.Branch:K._.Tag,n,(0,l.SHX)({owner:t,repo:a,action:"refs"}),e,`${t}/${a}`)}function G(e,t){let a=e.fetchFailed?"failed":e.isLoading?"loading":"loaded";return{status:a,refs:e.currentSearchResult,showCreateAction:e.refType===K._.Branch&&t&&e.searchTerm.length>0&&!e.exactMatchFound,searchIndex:e}}function U(e){let t=(0,g.useRef)(void 0);return t.current||(t.current=e()),t}var Z=a(52811);let q={RefSelectorContainer:"RefSelectorV1-module__RefSelectorContainer--SwNhD",RefSelectorInnerContainer:"RefSelectorV1-module__RefSelectorInnerContainer--qn456",RefSelectorHeading:"RefSelectorV1-module__RefSelectorHeading--G3Esn",RefSelectorCloseButton:"RefSelectorV1-module__RefSelectorCloseButton--bCOAZ",RefTypeTabs:"RefSelectorV1-module__RefTypeTabs--GU4pl",RefSelectorFilterContainer:"RefSelectorV1-module__RefSelectorFilterContainer--OegU8",RefSelectorInput:"RefSelectorV1-module__RefSelectorInput--ts9VT",LoadingContainer:"RefSelectorV1-module__LoadingContainer--u0vRX",ZeroStateText:"RefSelectorV1-module__ZeroStateText--FqKfe",ViewAllRefsActionLink:"RefSelectorV1-module__ViewAllRefsActionLink--ACTqj",ViewAllRefsActionText:"RefSelectorV1-module__ViewAllRefsActionText--s4Tyv",BranchOcticon:"RefSelectorV1-module__BranchOcticon--CqP31",RefActionText:"RefSelectorV1-module__RefActionText--Nh2Ju",Divider:"RefSelectorV1-module__Divider--FwlYD"};function M(e){let{ariaDescribedBy:t,ariaLabelledBy:a,ariaLabel:n,cacheKey:i,owner:s,repo:c,canCreate:o,types:h,hotKey:d,onOpenChange:u,size:f,getHref:m,onBeforeCreate:y,onRefTypeChanged:x,currentCommitish:p,onCreateError:S,onSelectItem:R,closeOnSelect:_,selectedRefType:w,customFooterItemProps:j,buttonClassName:v,buttonText:N,persistButtonText:O,buttonPrefix:A,showIcon:I,allowResizing:k,idEnding:F,useFocusZone:E}=e,[D,V]=(0,g.useState)(""),B=(0,g.useRef)(null),P=(0,g.useRef)(null),H="tree"===w?p.slice(0,7):p,[$,z]=(0,g.useState)(!1),[K,Z]=(0,g.useState)(!0),[q,M]=(0,g.useState)(!1),[X,J]=(0,g.useState)(("tree"===w?"branch":w)??(h??en)[0]),Y=function(e,t,a,r,n,i){let[s,l]=(0,g.useState)({status:"uninitialized",refs:[],showCreateAction:!1,searchIndex:null}),c=(0,g.useRef)({render:()=>{l(G(h.current,i))}}),o=(0,g.useRef)({render:()=>{l(G(d.current,i))}}),h=U(()=>W(e,t,a,"branch",c.current)),d=U(()=>W(e,t,a,"tag",o.current));return(0,g.useEffect)(()=>{let n=`${t}/${a}`;h.current.nameWithOwner!==n&&(h.current=W(e,t,a,"branch",c.current)),d.current.nameWithOwner!==n&&(d.current=W(e,t,a,"tag",o.current)),async function(){let e="branch"===r?h.current:d.current;e.render(),await e.fetchData(),e.search(""),e.render()}()},[e,t,a,r,h,d]),(0,g.useEffect)(()=>{let e="branch"===r?h.current:d.current;e.search(n),e.render()},[n,r,h,d]),s}(i,s,c,X,D,o),ee=(0,l.SHX)({owner:s,repo:c,action:"branches"}),et=(0,l.FeW)({owner:s,repo:c}),ea=(0,g.useCallback)(async()=>{y?.(D);let e=await T(ee,D,p);e.success?m&&(Y.searchIndex?.clearLocalStorage(),window.location.href=m(e.name)):S?.(e.error)},[y,D,ee,p,m,S,Y.searchIndex]),er=(0,g.useCallback)(async()=>{if(await C(et,D)){M(!0),Z(!1);return}M(!1),Z(!1),ea()},[et,D,ea,M]),ei=(0,g.useCallback)(e=>{J(e),x?.(e)},[J,x]);function es(){z(!1)}let el=(0,g.useCallback)((e,t)=>{R?.(e,t),es()},[R]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(L,{ariaDescribedBy:t,ariaLabelledBy:a,ariaLabel:n,refType:X,displayCommitish:H,focusTrapEnabled:K,preventClosing:q,size:f,onOpenChange:u,hotKey:d,inputRef:B,overlayOpen:$,onOverlayChange:z,buttonClassName:v,buttonText:N,persistButtonText:O,buttonPrefix:A,showIcon:I,allowResizing:k,idEnding:F,useFocusZone:E,children:(0,r.jsx)(Q,{filterText:D,displayCommitish:H,onFilterChange:V,refType:X,onRefTypeChange:ei,refsState:Y,onCreateError:e.onCreateError,showTagWarningDialog:q,setShowTagWarningDialog:M,onCreateBranch:er,inputRef:B,createButtonRef:P,onSelectItem:el,closeOnSelect:_,closeRefSelector:es,customFooterItemProps:j,...e,selectedRefType:X})}),q&&(0,r.jsx)(b,{isOpen:q,onDismiss:()=>{M(!1),P.current?.focus()},onConfirm:ea})]})}function Q({canCreate:e,currentCommitish:t,displayCommitish:a,defaultBranch:n,filterText:i,getHref:s,hideShowAll:l,onSelectItem:u,closeOnSelect:f,closeRefSelector:m,onFilterChange:y,onRefTypeChange:x,owner:p,selectedRefType:S,refsState:R,refType:b,repo:_,types:C,onCreateBranch:T,inputRef:w,createButtonRef:j,customFooterItemProps:v,viewAllJustify:L,actionListHeadingText:O}){var I;let{refs:k,showCreateAction:F,status:E}=R;return(0,g.useEffect)(()=>{let{single:e,plural:t}={branch:{single:"branch",plural:"branches"},tag:{single:"tag",plural:"tags"}}[b],a=`${k.length} ${1===k.length?e:t} found`,r=setTimeout(()=>{(0,Z.i)(a)},1e3);return()=>clearTimeout(r)},[k,b]),(0,r.jsxs)("div",{className:"py-2",children:[(0,r.jsxs)("div",{className:q.RefSelectorContainer,children:[(0,r.jsxs)("div",{className:q.RefSelectorInnerContainer,children:[(0,r.jsx)(o.A,{as:"h2",className:q.RefSelectorHeading,children:O??((I=C??en).includes("branch")&&I.includes("tag")?"Switch branches/tags":I.includes("branch")?"Switch branches":I.includes("tag")?"Switch tags":void 0)}),(0,r.jsx)(h.K,{tooltipDirection:"w","aria-label":"Cancel",variant:"invisible",icon:c.XIcon,onClick:m,className:q.RefSelectorCloseButton})]}),(0,r.jsx)(X,{defaultText:i,refType:b,canCreate:e,onFilterChange:y,ref:w})]}),(0,r.jsxs)("div",{style:{paddingBottom:F&&0===k.length?0:2},className:"pt-2",children:[(C??en).length>1&&(0,r.jsx)("div",{className:"px-2 pb-2",children:(0,r.jsx)(es,{refType:b,onRefTypeChanged:x,className:q.RefTypeTabs})}),"loading"===E||"uninitialized"===E?(0,r.jsx)(Y,{refType:b}):"failed"===E?(0,r.jsx)(el,{refType:b}):0!==k.length||F?(0,r.jsx)(H,{ariaControls:"branch"===b?"branches":"tags",filterText:i,refs:k,defaultBranch:"branch"===b?n:"",currentCommitish:b===S?t:"",getHref:s,onSelectItem:e=>{u?.(e,b),f&&m()}}):(0,r.jsx)(ee,{})]}),(0,r.jsxs)(d.l,{className:"p-0",children:[F&&(0,r.jsxs)(r.Fragment,{children:[k.length>0&&(0,r.jsx)(d.l.Divider,{className:(0,N.$)("d-block mt-0",q.Divider)}),(0,r.jsx)(ea,{displayCommitish:a,newRefName:i,onCreateBranch:T,createButtonRef:j})]}),(!l||v)&&(0,r.jsx)(d.l.Divider,{className:(0,N.$)(`d-block ${F?"mt-2":"mt-0"}`,q.Divider)}),!l&&(0,r.jsx)(et,{justify:L,refType:b,owner:p,repo:_,onClick:m}),v&&(0,r.jsx)(A,{...v,onClick:function(){v?.onClick?.(),m()}})]})]})}let X=(0,g.forwardRef)(J);function J({refType:e,canCreate:t,onFilterChange:a,defaultText:n},i){return(0,r.jsx)("div",{className:q.RefSelectorFilterContainer,children:(0,r.jsx)(u.A,{"aria-label":"tag"===e?"Filter tags":"Filter branches",leadingVisual:c.SearchIcon,value:n,placeholder:"tag"===e?"Find a tag...":t?"Find or create a branch...":"Find a branch...",ref:i,onInput:e=>{let t=e.target;t instanceof HTMLInputElement&&a(t.value)},className:q.RefSelectorInput})})}function Y({refType:e}){return(0,r.jsx)("div",{className:q.LoadingContainer,children:(0,r.jsx)(f.A,{size:"medium","aria-label":`Loading ${"branch"===e?"branches":"tags"}...`})})}function ee(){return(0,r.jsx)("div",{className:q.ZeroStateText,children:"Nothing to show"})}function et({refType:e,owner:t,repo:a,onClick:n,justify:i="start"}){let s="branch"===e?"branches":"tags";return(0,r.jsx)(d.l.LinkItem,{role:"link",href:(0,l.SHX)({owner:t,repo:a,action:s}),onClick:n,className:q.ViewAllRefsActionLink,children:(0,r.jsxs)("div",{style:{justifyContent:i},className:q.ViewAllRefsActionText,children:["View all ",s]})})}function ea({displayCommitish:e,newRefName:t,onCreateBranch:a,createButtonRef:n}){return(0,r.jsxs)(d.l.Item,{role:"button",onSelect:a,ref:n,children:[(0,r.jsx)(m.A,{icon:c.GitBranchIcon,className:q.BranchOcticon}),(0,r.jsx)("span",{children:"Create branch\xa0"}),(0,r.jsx)("span",{className:q.RefActionText,children:t}),(0,r.jsx)("span",{children:"\xa0from\xa0"}),(0,r.jsx)("span",{className:q.RefActionText,children:e})]})}try{M.displayName||(M.displayName="RefSelectorV1")}catch{}try{Q.displayName||(Q.displayName="RefSelectorActionList")}catch{}try{X.displayName||(X.displayName="RefTextFilter")}catch{}try{J.displayName||(J.displayName="RefTextFilterWithRef")}catch{}try{Y.displayName||(Y.displayName="Loading")}catch{}try{ee.displayName||(ee.displayName="RefsZeroState")}catch{}try{et.displayName||(et.displayName="ViewAllRefsAction")}catch{}try{ea.displayName||(ea.displayName="CreateRefAction")}catch{}let er={RefSelectorTabs:"RefSelector-module__RefSelectorTabs--YbwCq",RefSelectorTabLink:"RefSelector-module__RefSelectorTabLink--C9Lub"},en=["branch","tag"];function ei(e){return(0,r.jsx)(M,{...e})}function es({refType:e,onRefTypeChanged:t,sx:a,className:i}){return(0,r.jsxs)(s.A,{sx:{...a},"aria-label":"Ref type",className:(0,N.$)(er.RefSelectorTabs,i),children:[(0,r.jsx)(s.A.Link,{as:n.Q,id:"branch-button","aria-controls":"branches",selected:"branch"===e,onClick:()=>t("branch"),className:er.RefSelectorTabLink,children:"Branches"}),(0,r.jsx)(s.A.Link,{as:n.Q,id:"tag-button","aria-controls":"tags",selected:"tag"===e,onClick:()=>t("tag"),className:er.RefSelectorTabLink,children:"Tags"})]})}function el({refType:e}){return(0,r.jsxs)(i.A,{variant:"danger",children:["Could not load ","branch"===e?"branches":"tags"]})}try{ei.displayName||(ei.displayName="RefSelector")}catch{}try{es.displayName||(es.displayName="RefTypeTabs")}catch{}try{el.displayName||(el.displayName="LoadingFailed")}catch{}}}]);
//# sourceMappingURL=ui_packages_ref-selector_RefSelector_tsx-ed8ae64c3b7c.js.map