"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_agent-sessions_utils_elapsed-time-util_ts-ui_packages_copilot-chat_utils_copilot--144e6d"],{1574:(e,t,r)=>{r.d(t,{Y:()=>n,w:()=>s});let n={InProgress:"in_progress",Completed:"completed",Failed:"failed",Idle:"idle",WaitingForUser:"waiting_for_user",TimedOut:"timed_out",Cancelled:"cancelled",Queued:"queued"};function s(e){switch(e){case n.InProgress:return"In progress";case n.Completed:return"Ready for review";case n.Failed:return"Failed";case n.Idle:return"Idle";case n.WaitingForUser:return"Waiting for user";case n.TimedOut:return"Timed out";case n.Cancelled:return"Cancelled";case n.Queued:return"Queued";default:return"Unknown"}}},99723:(e,t,r)=>{r.d(t,{Y:()=>n});function n(e,t){let r=new Date(e).getTime(),n=Math.floor(((t&&"0001-01-01T00:00:00Z"!==t?new Date(t).getTime():Date.now())-r)/1e3),s=[{value:Math.floor(n/86400),label:"d"},{value:Math.floor(n%86400/3600),label:"h"},{value:Math.floor(n%3600/60),label:"m"},{value:n%60,label:"s"}].filter(e=>e.value>0);return 0===s.length?"0s":1===s.length?`${s[0]?.value??0}${s[0]?.label??""}`:s[1]?`${s[0]?.value}${s[0]?.label} ${s[1].value}${s[1].label??""}`:`${s[0]?.value??0}${s[0]?.label??""}`}},45260:(e,t,r)=>{r.d(t,{I:()=>i,j:()=>FetchCAPI401Error});var n=r(54187),s=r(22069),o=r(7799);let FetchCAPI401Error=class FetchCAPI401Error extends Error{constructor(e){super(e),this.name="FetchCAPI401Error"}};async function i({path:e,apiURL:t,method:r="GET",streamingResponse:i=!1,body:a}){let l=new n.l,u=await l.getAuthToken();if(!u)throw Error("No token available");let c={authToken:u,basePath:(0,o._$)().copilotApiOverrideUrl??t??"https://api.githubcopilot.com",method:r,path:e,streamingResponse:i,body:a},d=await (0,s.p)(c);if(!d.ok){if(401===d.status)throw new FetchCAPI401Error("Unauthorized access - token may be invalid or expired");throw Error("Failed to fetch agent sessions")}return d}},54187:(e,t,r)=>{r.d(t,{l:()=>AgentSessionsTokenProvider});var n=r(879);let AgentSessionsTokenProvider=class AgentSessionsTokenProvider extends n.J{constructor(){super([],"/copilot/agent-sessions/token","AGENT_SESSIONS_TOKEN")}}},92520:(e,t,r)=>{r.d(t,{Y:()=>AuthToken});var n=r(50467);let AuthToken=class AuthToken{get authorizationHeaderValue(){return`GitHub-Bearer ${this.value}`}needsRefreshing(e){return this.isExpired||this.ssoChanged(e)}get isExpired(){let e=new Date(this.expiration);return new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()))<new Date(Date.now()+15e3)}ssoChanged(e){return!(this.ssoOrgIDs.every(t=>e.includes(t))&&e.every(e=>this.ssoOrgIDs.includes(e)))}static fromResult(e,t){return new AuthToken(e.token,e.expiration,t)}serialize(){return{value:this.value,expiration:this.expiration,ssoOrgIDs:this.ssoOrgIDs}}static deserialize(e){return new AuthToken(e.value,e.expiration,e.ssoOrgIDs)}constructor(e,t,r){(0,n._)(this,"value",void 0),(0,n._)(this,"expiration",void 0),(0,n._)(this,"ssoOrgIDs",void 0),this.value=e,this.expiration=t,this.ssoOrgIDs=r}}},879:(e,t,r)=>{r.d(t,{J:()=>CopilotAuthTokenProvider});var n=r(50467),s=r(92520),o=r(85351),i=r(60039);let CopilotAuthTokenProvider=class CopilotAuthTokenProvider{async getAuthToken(){let e=this.getLocalStorageAuthToken();return e?this.validateAuthToken(e):this.fetchAuthToken()}setLocalStorageAuthToken(e){this.copilotLocalStorage.setItem(this.storageKey,JSON.stringify(e.serialize()))}getLocalStorageAuthToken(){let e=this.copilotLocalStorage.getItem(this.storageKey);return e?s.Y.deserialize(JSON.parse(e)):null}removeLocalStorageAuthToken(){this.copilotLocalStorage.removeItem(this.storageKey)}async validateAuthToken(e){return e.needsRefreshing(this.ssoOrgIDs)?this.fetchAuthToken():e}fetchAuthToken(){return this.currentAuthTokenRequest||(this.currentAuthTokenRequest=this._fetchAuthToken()),this.currentAuthTokenRequest}async _fetchAuthToken(){let e=await (0,i.lS)(this.tokenEndpoint,{method:"POST"});if(e.ok){let t=await e.json();this.currentAuthTokenRequest=null;let r=s.Y.fromResult(t,this.ssoOrgIDs);return this.setLocalStorageAuthToken(r),r}throw this.currentAuthTokenRequest=null,Error("Failed to mint new auth token")}constructor(e,t="/github-copilot/chat/token",r="COPILOT_AUTH_TOKEN"){(0,n._)(this,"tokenEndpoint",void 0),(0,n._)(this,"storageKey",void 0),(0,n._)(this,"ssoOrgIDs",void 0),(0,n._)(this,"currentAuthTokenRequest",void 0),(0,n._)(this,"copilotLocalStorage",void 0),this.ssoOrgIDs=e,this.currentAuthTokenRequest=null,this.copilotLocalStorage=(0,o.A)("localStorage",{throwQuotaErrorsOnSet:!1,ttl:864e5}),this.storageKey=r,this.tokenEndpoint=t}}},99377:(e,t,r)=>{r.d(t,{C6:()=>s,UH:()=>l,Wp:()=>u,hs:()=>i,mF:()=>a,wh:()=>n,xP:()=>o});let n={explain:"explain",conversation:"conversation",suggest:"suggest",discussFileDiff:"discuss-file-diff",explainFileDiff:"explain-file-diff",reviewPr:"review-pull-request",actionsAgent:"actions-agent",planningAgent:"planning-agent"},s=["exception","filtered","publicCode","contentTooLarge","rateLimit","agentUnauthorized","agentRequest","networkError","multipleAgentsAttempt"],o=["bing-search","codesearch","semantic-code-search","lexical-code-search","kb-search","getfile","getfilechanges","getdiscussion","get-actions-job-logs","getalert","planskill","get-github-data","support-search","get-figma","codesearchagentskill","draft-issue","repository-metadata"],i={Experiments:"experiements",Prompt:"prompt",None:"none"},a={Unlicensed:"unlicensed",LicensedFull:"licensed_full",LicensedLimited:"licensed_limited"},l={IndividualFree:"free",IndividualPro:"pro",IndividualProPlus:"pro_plus",Business:"business",Enterprise:"enterprise"},u="NULL_MESSAGE"},38007:(e,t,r)=>{let n;r.d(t,{BI:()=>p,Ti:()=>f,lA:()=>h,sX:()=>g});var s=r(70837),o=r(18679),i=r(85351),a=r(7479);let{getItem:l}=(0,i.A)("localStorage"),u="dimension_",c=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","scid"];try{let e=(0,s.O)("octolytics");delete e.baseContext,n=new o.s(e)}catch{}function d(e){let t=(0,s.O)("octolytics").baseContext||{};if(t)for(let[e,r]of(delete t.app_id,delete t.event_url,delete t.host,Object.entries(t)))e.startsWith(u)&&(t[e.replace(u,"")]=r,delete t[e]);let r=document.querySelector("meta[name=visitor-payload]");for(let[e,n]of(r&&Object.assign(t,JSON.parse(atob(r.content))),new URLSearchParams(window.location.search)))c.includes(e.toLowerCase())&&(t[e]=n);return t.staff=(0,a.X)().toString(),Object.assign(t,e)}function h(e){n?.sendPageView(d(e))}function g(){return document.head?.querySelector('meta[name="current-catalog-service"]')?.content}function p(e,t={}){let r=g(),s=r?{service:r}:{};for(let[e,r]of Object.entries(t))null!=r&&(s[e]=`${r}`);n&&(d(s),n.sendEvent(e||"unknown",d(s)))}function f(e){return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,JSON.stringify(t)]))}},60039:(e,t,r)=>{r.d(t,{DI:()=>o,QJ:()=>a,Sr:()=>l,lS:()=>i});var n=r(26559),s=r(62053);async function o(e,t={}){var r=e;if(new URL(r,window.location.origin).origin!==window.location.origin)throw Error("Can not make cross-origin requests from verifiedFetch");let i=function(e){let t=new URL(e,window.location.href),r=new URL(window.location.href,window.location.origin),n=r.searchParams.get("_features");n&&!t.searchParams.has("_features")&&t.searchParams.set("_features",n);let s=r.searchParams.get("_tracing");return s&&!t.searchParams.has("_tracing")&&t.searchParams.set("_tracing",s),e.startsWith(window.location.origin)?t.href:`${t.pathname}${t.search}`}(e),a={...t.headers,"GitHub-Verified-Fetch":"true",...(0,n.kt)()},l=await fetch(i,{...t,headers:a}),u=l?.headers?.get("X-Github-Request-Id");return u&&(0,s.Ex)(u),l}function i(e,t){let r={...t?.headers??{},Accept:"application/json","Content-Type":"application/json"},n=t?.body?JSON.stringify(t.body):void 0;return o(e,{...t,body:n,headers:r})}function a(e,t={}){let r={...t.headers,"GitHub-Is-React":"true"};return o(e,{...t,headers:r})}function l(e,t){let r={...t?.headers??{},"GitHub-Is-React":"true"};return i(e,{...t,headers:r})}},1948:(e,t,r)=>{r.d(t,{Fn:()=>l,eS:()=>a});var n=r(74848),s=r(21728),o=r(96540);let i=(0,o.createContext)(void 0);function a(){let e=(0,o.useContext)(i);if(!e)throw Error("useConsecutiveCAPI401sContext must be used within a ConsecutiveCAPI401sProvider");return e}function l(e){let t,r,a,l,c,d=(0,s.c)(7),{children:h}=e,[g,p]=(0,o.useState)(0);return d[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>p(u),a=()=>p(0),d[0]=r,d[1]=a):(r=d[0],a=d[1]),d[2]!==g?(l={numberOf401s:g,increment401s:r,reset401s:a},d[2]=g,d[3]=l):l=d[3],t=l,d[4]!==h||d[5]!==t?(c=(0,n.jsx)(i.Provider,{value:t,children:h}),d[4]=h,d[5]=t,d[6]=c):c=d[6],c}function u(e){return e+1}try{i.displayName||(i.displayName="ConsecutiveCAPI401sContext")}catch{}try{l.displayName||(l.displayName="ConsecutiveCAPI401sProvider")}catch{}},47360:(e,t,r)=>{r.d(t,{mE:()=>l,mV:()=>a});var n=r(74848),s=r(21728),o=r(96540);let i=(0,o.createContext)(void 0);function a(){let e=(0,o.useContext)(i);if(!e)throw Error("usePullContext must be used within a PullContextProvider");return e}function l(e){let t,r,o,a=(0,s.c)(5),{pull:l,children:u}=e;return a[0]!==l?(r={pull:l},a[0]=l,a[1]=r):r=a[1],t=r,a[2]!==u||a[3]!==t?(o=(0,n.jsx)(i.Provider,{value:t,children:u}),a[2]=u,a[3]=t,a[4]=o):o=a[4],o}try{i.displayName||(i.displayName="PullContext")}catch{}try{l.displayName||(l.displayName="PullContextProvider")}catch{}},91768:(e,t,r)=>{r.d(t,{b:()=>l});var n=r(97286),s=r(45260),o=r(1948),i=r(54187),a=r(96540);function l(...e){let t=(0,n.I)(...e),{numberOf401s:r,increment401s:u,reset401s:c}=(0,o.eS)(),{isError:d,isLoading:h,error:g}=t;return(0,a.useEffect)(()=>{d&&g instanceof s.j?u():d||h?r>5&&(new i.l().removeLocalStorageAuthToken(),c()):c()},[d,h,g,u,c,r]),t}},96316:(e,t,r)=>{r.d(t,{t:()=>c});var n=r(21728),s=r(91768),o=r(1574),i=r(88795),a=r(47360),l=r(45260),u=r(96540);function c(e){let t,r,o,c,g,p=(0,n.c)(20),{apiURL:f,initialData:m,sessionsPollingInterval:v}=e,w=(0,i.t)(),{pull:T}=(0,a.mV)(),{id:k}=T,[C,y]=(0,u.useState)(0),[A,_]=(0,u.useState)(!1),b=C>0&&!A;p[0]!==f||p[1]!==k||p[2]!==w.name||p[3]!==w.ownerLogin?(t=["agent-sessions",w.ownerLogin,w.name,k,f],p[0]=f,p[1]=k,p[2]=w.name,p[3]=w.ownerLogin,p[4]=t):t=p[4],p[5]!==f||p[6]!==k?(r=async()=>{try{let e=await (0,l.I)({apiURL:f,path:`/agents/sessions/resource/pull/${k}`}),t=(await e.json()).sessions;return y(0),_(!1),t.sort(h)}catch(e){throw y(e=>{let t=e+1;return t>=10&&_(!0),t}),e}},p[5]=f,p[6]=k,p[7]=r):r=p[7],p[8]!==v?(o=e=>{let t=e.state.data;return t?t.some(d)?v:10*v:v},p[8]=v,p[9]=o):o=p[9];let I=C<10;p[10]!==m||p[11]!==t||p[12]!==r||p[13]!==o||p[14]!==I?(c={queryKey:t,queryFn:r,initialData:m,refetchInterval:o,enabled:I},p[10]=m,p[11]=t,p[12]=r,p[13]=o,p[14]=I,p[15]=c):c=p[15];let P=(0,s.b)(c);return p[16]!==b||p[17]!==P||p[18]!==A?(g={...P,timedOut:A,isRetrying:b},p[16]=b,p[17]=P,p[18]=A,p[19]=g):g=p[19],g}function d(e){return e.state===o.Y.InProgress||e.state===o.Y.Idle||e.state===o.Y.WaitingForUser||e.state===o.Y.Queued}function h(e,t){return new Date(t.created_at).getTime()-new Date(e.created_at).getTime()}},88795:(e,t,r)=>{r.d(t,{d:()=>a,t:()=>l});var n=r(74848),s=r(21728),o=r(96540);let i=o.createContext({});function a(e){let t,r=(0,s.c)(3),{repository:o,children:a}=e;return r[0]!==a||r[1]!==o?(t=(0,n.jsxs)(i.Provider,{value:o,children:[" ",a," "]}),r[0]=a,r[1]=o,r[2]=t):t=r[2],t}function l(){return o.useContext(i)}try{i.displayName||(i.displayName="CurrentRepositoryContext")}catch{}try{a.displayName||(a.displayName="CurrentRepositoryProvider")}catch{}}}]);
//# sourceMappingURL=ui_packages_agent-sessions_utils_elapsed-time-util_ts-ui_packages_copilot-chat_utils_copilot--144e6d-3474ba054769.js.map